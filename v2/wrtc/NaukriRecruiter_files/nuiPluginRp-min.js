//Tab
var tabbing=function(b){var a=this;a.tNavTagAnc="";a.ancLength="";a.allEle=[];a.id=b.id;a.init=function(f,c,e,g){a.tNavTagAnc=$n("#"+a.id+" li a");a.ancLength=a.tNavTagAnc.length;for(var d=0;d<a.ancLength;d++){a.allEle.push(a.tNavTagAnc.eq(d));a.allEle[a.allEle.length-1].addEvent("click",function(h){return function(){a.tabFunc(h,c,e,g)}}(d))}if(f>0&&f<a.ancLength){a.tabFunc(f,c,e,g)}else{a.tabFunc(0,c,e,g)}};this.tabFunc=function(j,h,e,f){for(var g=0;g<a.ancLength;g++){var c=a.allEle[g];if(h){$n("#"+c.attr("rel")).html("")}c.parent().changeClass((j==g)?"sel":"");if(!h){if($n("#"+c.attr("rel")).hasClass(e)||$n("#"+c.attr("rel")).hasClass(f)){$n("#"+c.attr("rel")).replaceClass((j!=g)?e:f,(j!=g)?f:e)}else{if(g==j){$n("#"+c.attr("rel")).addClass(e)}else{$n("#"+c.attr("rel")).addClass(f)}}}var d=a.allEle[j];if(h&&j==g){a.callXml(a.allEle[j],d)}}};this.callXml=function(d,c){$n(d).ajaxReq({type:"get",async:"true",datatype:"xml",data:"t="+c.attr("rel"),url:"files/tabContent.xml",success:function e(g){var f=g.getElementsByTagName(c.attr("rel"))[0].childNodes[0].nodeValue;var h=$n("#"+a.id);h.next().first().html(f)},error:function(){alert("Custom Error Message")}})}};

//Raphael Plugin

var rp_XYaxis=function(a){var d=[],ad=[],n=[],at=[],N=[],b=[],l=[],X=[],P;var y,e,c,T,F,W,Y,G,x,M,ah,ab,ar,aq,ap,ao,an,al,S,u,af,C,Q,k,K,Z,ai,w,v,P,L,g,V,au,s,O,B,o,D,m,H,U,I,R,h,ay,ax,r,aa;XY=this;XY.toolTip=a.ToolTip;XY.id=a.container_id;XY.color=a.Color;XY.xyLabel=a.xyAxisLabel;O=$n("#"+XY.id).width();B=$n("#"+XY.id).height();m=40;if(XY.xyLabel.xlabel){if(XY.xyLabel.xlabel.replace(/ /gi,"")==""){x_axTxt=""}else{x_axTxt=XY.xyLabel.xlabel.substring(0,15)+".."}}else{x_axTxt=""}p=Raphael(document.getElementById(XY.id),(O+1),B);if(a.graphData!=null&&a.graphData!=""&&a.graphData!=undefined){XY.arr=a.graphData;XY.nr=XY.arr.length;if(!XY.xyLabel.ylabel){D=22}else{D=XY.xyLabel.ywidth-5}function q(t,aC,aA){var az,aB;aB=p.set();az=p.set();aB.push(p.path("M,"+(D)+","+(B-m+3)+"L,"+(D)+","+(B-m-15)),p.circle((D),(B-m-15),2)).attr({stroke:"#66bbe7",fill:"#66bbe7"});if(!aC){aC=""}az.push(p.text(D-5,B-m-12,t).attr({"text-anchor":"end"}),p.text(D-5,B-m,aC.substring(0,7)).attr({"text-anchor":"end"}));az.attr({fill:"#000","stroke-width":0.1,title:aA})}if(XY.xyLabel.ylabel){if(XY.xyLabel.ylabel.replace(/ /gi,"")==""){D=22}else{var ag=XY.xyLabel.ylabel.split(" ");if(ag[2]&&ag[1].length<4){var E=ag[1]+" "+ag[2];q(ag[0],E,XY.xyLabel.ylabel)}else{q(ag[0],ag[1],XY.xyLabel.ylabel)}D=parseInt(XY.xyLabel.ywidth)}}ay=0;o=XY.nr+1;au=x_axisFx=D;H=B-m;U=O-D;I=(O-D)/o;R=I;h=V=I;for(i=0;i<XY.nr;i++){var am=""+XY.arr[i].avg_sal;d[i]=am.indexOf(".")==-1?am:parseFloat(am).toFixed(1);at[i]=parseFloat(XY.arr[i].maxs).toFixed(1);n[i]=parseFloat(XY.arr[i].mins).toFixed(1);ad[i]=parseFloat(XY.arr[i].avg_exp).toFixed(1);N[i]=XY.arr[i].profiles;b[i]=XY.arr[i].rSize;l[i]=XY.arr[i].cpn;if(XY.arr[i].baloon){X[0]=i;X[1]=true}}s=d[0];ax=d[0];for(i=0;i<XY.nr;i++){if(s<parseFloat(d[i])){s=parseFloat(d[i])}if(ax>parseFloat(d[i])){ax=parseFloat(d[i])}}if(s==ax){g=5;rhgt=(B-m)/g;p.text(D/2,B/2,d[0])}else{v=Math.floor(ax);P=v;aa=(Math.ceil((s-ax)/5));if(aa>1){aa=Math.ceil(aa)}if(!XY.toolTip){remTT=3}else{remTT=0}if(L=Math.ceil((s-ax)/aa)+5-remTT){g=L;rhgt=(B-m)/g}else{throw new Error("At lest two salary range must be different")}var A=rhgt*g;for(i=1;i<g;i++){A=A-rhgt;p.text(D/2,A,v);v=v+aa}}v=P;function aj(aA,aB){if(s==ax){return B/2}else{var az=aA-((rhgt)+(rhgt*(aB-v)/aa));return az}}if(a.grpType=="SalAcrossComps"){var ak=0;for(i=0;i<XY.nr;i++){if(XY.arr[i].baloon){ak=1}}if(ak==0){throw new Error('At least one array touple must contain boolean parameter true or false for baloon"')}}for(i=1;i<=g;i++){if((i%2)==0){p.rect(D,ay,U,rhgt).attr({fill:XY.color.oddRow,stroke:XY.color.oddRowBdr})}else{p.rect(D,ay,U,rhgt).attr({fill:XY.color.evenRow,stroke:XY.color.evenRowBdr})}ay=ay+rhgt}function av(az,t){if(t!=null){if(XY.arr[t].baloon){return 0}else{if(az=="Size0"){cSize=(rhgt*(10/100))}else{if(az=="Size1"){cSize=(rhgt*(20/100))}else{if(az=="Size2"){cSize=(rhgt*(25/100))}else{if(az=="Size3"){cSize=(rhgt*(35/100))}else{if(az=="Size4"){cSize=(rhgt*(45/100))}else{if(az=="Size5"){cSize=(rhgt*(55/100))}else{if(az=="Size6"){cSize=(rhgt*(65/100))}else{if(az=="Size7"){cSize=(rhgt*75/100)}else{if(az=="Size8"){cSize=(rhgt*85/100)}else{throw new Error("Please Enter a correct profile Size(prf_sz) for touple index "+(t+1))}}}}}}}}}return cSize}}}for(i=0;i<o;i++){p.rect(D,0,(I),B-m).attr({stroke:XY.color.border});I=I+h}I=R;function z(t){if(X[0]==t){return false}else{return true}}var J=0;function ae(az,aA,t){if(z(t)){k=115,K=73;S=az-k/2-18;Q=aA-K-10;u=S+k/2;tl_Fpy=Q+K;af=(S+k/2)+15;tl_Tpy=(Q+K)+10;C=S+k/2+10;Z=p.set();ai=p.set();w=p.set();ai.push(p.path("M,"+u+","+tl_Fpy+",L,"+af+","+tl_Tpy+"L,"+C+","+tl_Fpy),p.rect(S,Q,k,K));ai.attr({stroke:"#1b6d95",fill:"#1b6d95"});Z.push(p.text(S+57,Q+8,(N[t]+" profiles")),p.text(S+57,Q+23,"Avg Exp "+ad[t]+"  years"),p.text(S+54,Q+38,"Avg Sal "+d[t]+"  lacs"),p.text(S+54,Q+52,"Min Sal "+n[t]+" lacs"),p.text(S+54,Q+66,"Max Sal "+at[t]+" lacs"));Z.attr({fill:"#fff","font-size":"11px"});w.push(ai,Z);J=0}else{J=1}}function ac(aA,az,t){x2=aA,y2=az-(av(b[t]),t);Y=y2-35;G=y2-100;x=50;ttX1=x2-x/2,ttX2=x2+x/2;ttY1=ttY2=Y;blTT=p.set();blCon=p.set();bltxt=p.set();blCon.push(p.circle(ttX1+26,ttY1-10,26),p.path("M,"+(ttX1+3.5)+","+ttY1+",L,"+x2+","+y2+"L,"+(ttX2-0.3)+","+ttY2+"Z"));blCon.attr({stroke:"#1b6d95",fill:"#1b6d95"});bltxt.push(p.text(ttX1+x/2,ttY1-23,"You are"),p.text(ttX1+x/2,ttY1-12,"here"),p.text(ttX1+x/2,ttY1,"Avg Sal"),p.text(ttX1+x/2,ttY1+15,d[t]));bltxt.attr({fill:"#fff","font-size":"10px"});blTT.push(blCon,bltxt)}M=p.set();ah=p.set();ab=[];Sal_ary=[];function aw(aC,aD){var az=aD;e=B-m;for(i=0;i<aC;i++){Sal_ary[i]=aj(e,d[i]);ab[i]=aD;aD=aD+I}aD=az;c=p.set();for(i=1;i<=aC;i++){var aA=i-1;M.push(p.circle(ab[i-1],Sal_ary[i-1],av(b[i-1],aA)).attr({stroke:XY.color.Coutbdr,fill:XY.color.Cout}),p.circle(ab[i-1],Sal_ary[i-1],3).attr({"stroke-width":0.5,stroke:XY.color.Cinbdr,fill:XY.color.Cin}))}for(i=1;i<=aC*2;i++){M[i-1].id="clr"+i}M.attr({cursor:"pointer"});for(i=1;i<aC;i++){p.path("M,"+ab[i-1]+","+Sal_ary[i-1]+",L,"+ab[i]+","+Sal_ary[i]).attr({stroke:XY.color.line,"stroke-width":1.5})}for(i=0;i<aC;i++){if(b[i]=="Size0"){p.circle(ab[i],Sal_ary[i],5).attr({"stroke-width":1.5,stroke:"#ff0"}).glow({fill:true,color:"#ff0000"})}}if(a.grpType=="SalAcrossComps"){var aE=2;for(i=0;i<aC;i++){if(XY.arr[i].baloon){aE=i;if(b[i]=="Size0"){p.text(ab[i],Sal_ary[i]+av(b[i],i)+10,"Error in Data").attr({fill:"#ff0000"})}}else{if(b[i]=="Size0"){p.text(ab[i],Sal_ary[i]+av(b[i],i)+10,"Error in Data").attr({fill:"#ff0000"})}else{p.text(ab[i],Sal_ary[i]+av(b[i],i)+8,d[i])}}}ac(ab[aE],Sal_ary[aE],aE);var aB=f(aE);M[aB].glow({width:12,opacity:0.15,color:"#888"});M[aB].attr({fill:"#56affa",stroke:"#56affa"})}else{for(i=0;i<aC;i++){if(b[i]=="Size0"){p.text(ab[i],Sal_ary[i]+av(b[i],i)+10,"Error in Data").attr({fill:"#ff0000"})}else{p.text(ab[i],Sal_ary[i]+av(b[i],i)+8,d[i])}}}}function f(t){if(t==0){E=1}else{if(t==1){E=3}else{if(t==2){E=5}else{if(t==3){E=7}else{if(t==4){E=9}}}}}return E}xAxisData=[];if(a.grpType=="SalAcrossComps"){W=I+D;for(i=0;i<XY.nr;i++){if(l[i]!=null&l[i]!=""){xAxisData[i]=l[i]}else{xAxisData[i]="Not Exist"}F=xAxisData[i].split(" ");for(j=1;j<=F.length;j++){if(j!=4){if(F[j-1]!=null){if(F[j-1].length>10){F[j-1]=F[j-1].substring(0,10)}p.text(W,B-(m-(j*10)),F[j-1]).attr({fill:"#458cc1","font-size":"11px",title:xAxisData[i]})}}}W=V+W;au=D}}else{if(a.grpType=="SalInComps"){W=I+D;for(i=0;i<XY.nr;i++){p.text(W,B-(m-15),XY.arr[i].Exp_x).attr({fill:"#787777"});W=V+W}if(x_axTxt){y=p.set();y.push(p.path("M,"+(D)+","+(B-m+6)+"L,"+(D+20)+","+(B-m+6)),p.circle((D+20),(B-m+6),2)).attr({stroke:"#66bbe7",fill:"#66bbe7"});p.text(D,B-(m-15),x_axTxt).attr({"stroke-width":0.1,"text-anchor":"start",title:XY.xyLabel.xlabel})}}}T=au+I;aw(XY.nr,T);M.mouseover(function(){if(XY.toolTip){var t=this.id;if(t=="clr1"||t=="clr2"){ae(ab[0],Sal_ary[0],0)}else{if(t=="clr3"||t=="clr4"){ae(ab[1],Sal_ary[1],1)}else{if(t=="clr5"||t=="clr6"){ae(ab[2],Sal_ary[2],2)}else{if(t=="clr7"||t=="clr8"){ae(ab[3],Sal_ary[3],3)}}}}if(t=="clr9"||t=="clr10"){ae(ab[4],Sal_ary[4],4)}}});M.mouseout(function(){if(J!=1&&XY.toolTip){w.hide()}})}else{p.text(O/2,B/2,"No Graph Data Found").attr({"font-size":(B*10/100)+"px",fill:"#ececec"}).rotate(-12,O/2,B/2)}};

//Tooltip

chainingFunction.prototype.tooltip=function(){for(var c=0;c<arguments.length;c++){this.event=(arguments[c].events)?arguments[c].events:false;this.closeBtn=(arguments[c].closeBtn)?arguments[c].closeBtn:false;this.content=(arguments[c].content)?arguments[c].content:"";this.closeEvent=(arguments[c].closeEvent)?arguments[c].closeEvent:false;this.dir=(arguments[c].dir)?arguments[c].dir:"right";this.arrow=(arguments[c].arrow)?arguments[c].arrow:false}var d=this;var e=(document.compatMode=="CSS1Compat")?document.documentElement:document.body;if($n("#tdv").length==0){var b=$n("<div>");b.attr("id","tdv");var a=$n("<iframe>");a.attr({scrolling:"no",frameborder:"0",marginheight:"0",marginwidth:"0",id:"tifrm"});$n("body").append(b.currObj()).append(a.currObj())}b=$n("#tdv");b.hide();a=$n("#tifrm").hide();(d.event)?(d.addEvent(d.event,function(){d.showTT()})):d.showTT();d.showTT=function(){var u=e.scrollTop;var j=e.scrollLeft;var r=d.position();d.left=r.left;d.top=r.top;d.innerW=d.innerwidth();d.innerH=d.innerheight();if(/^[#]/.test(d.content)){var f=$n(d.content);f.clss=f.attr("class");b.show();a.show();b.html(f.html());b.changeClass("");a.changeClass("");b.addClass(f.clss);a.addClass(f.clss)}else{b.show();a.show();d.arrow?b.html('<div class="defaultCont"><div class="arrow"></div>'+d.content+"</div>"):b.html('<div class="defaultCont">'+d.content+"</div>");b.changeClass("");a.changeClass("");b.addClass("default");a.addClass("default")}var o=d.left+d.width();var l=d.top+d.height();var t=d.top-u;var i=d.left-j;var h=(t-b.height()+u)-10;var v=(d.left-b.width())-15;var s=(d.height()+b.height());var g=(t+b.height()+d.height()+10);var p=b.width();var n=d.width()+b.width()+i;var q=d.left+d.width();var k=d.innerW-(i+d.width());switch(d.dir.toLowerCase()){case"top":(function(){var w=((i+p)<d.innerW)?d.left:(v+d.width());if(d.arrow){(t>s)?(((i+p)<d.innerW)?b.addClass("topar"):b.addClass("toparR")):(((i+p)<d.innerW)?b.addClass("btmar"):b.addClass("btmarR"))}h=(t>s)?h:l;b.css({left:w+"px",top:h+"px"});a.css({left:w+"px",top:h+"px",height:(b.height())+"px"})})();break;case"bottom":(function(){var w=((i+p)<d.innerW)?d.left:(v+d.width());if(d.arrow){(g<d.innerH)?(((i+p)<d.innerW)?b.addClass("btmar"):b.addClass("btmarR")):(((i+p)<d.innerW)?b.addClass("topar"):b.addClass("toparR"))}h=(g<d.innerH)?l:h;b.css({left:w+"px",top:h+"px"});a.css({left:w+"px",top:h+"px",height:(b.height())+"px"})})();break;case"left":(function(){var w=t+b.height();if(d.arrow){((i>p)||(k<i))?((w>d.innerH)?b.addClass("leftarR"):b.addClass("leftar")):((w>d.innerH)?b.addClass("rightarR"):b.addClass("rightar"))}v=((i>p)||(k<i))?v:o;w=(w<d.innerH)?d.top:(h+d.height()+10);b.css({left:v+"px",top:w+"px"});a.css({left:v+"px",top:w+"px",height:(b.height())+"px"})})();break;case"right":default:(function(){var w=t+b.height();if(d.arrow){((d.innerW>n)||(k>i))?((w>d.innerH)?b.addClass("rightarR"):b.addClass("rightar")):((w>d.innerH)?b.addClass("leftarR"):b.addClass("leftar"))}q=((d.innerW>n)||(k>i))?q:v;w=(w<d.innerH)?d.top:(h+d.height()+10);b.css({left:q+"px",top:w+"px"});a.css({left:q+"px",top:w+"px",height:(b.height())+"px"})})();break}if(d.closeBtn){var m=document.createElement("a");d.cbtn=$n(m);d.cbtn.addClass("closeT").html("X");(b.first())?(b.first().append(m)):b.append(m)}d.hideTT()};d.hideTT=function(){if(d.closeBtn){d.cbtn.addEvent("click",function(){b.changeClass("");b.hide();a.hide();a.changeClass("")})}else{d.addEvent(d.closeEvent,function(){b.changeClass("");b.hide();a.hide();a.changeClass("")})}}};

//dropdown menu

var layerMenu = function(){var me=this;	me.init=function(inputId, menuId){me.inpId = $n("#" + inputId + " input"); me.lyrId = $n("#" + menuId);	me.inpId.click(function(e){$n.stopPropagation(e);me.lyrId.show(); me.inpId.css({'borderBottom':0});$n('#showfilter').css({'display':'block'});}).addEvent("focus", function(e){me.lyrId.show();}).addEvent("keydown", function(e){if(e.shiftKey && e.keyCode == 9){me.lyrId.hide();}})
document.onclick=function(e){me.lyrId.hide();$n('#showfilter').css({'display':'none'});};me.lyrId.click(function(e){$n.stopPropagation(e);});}}